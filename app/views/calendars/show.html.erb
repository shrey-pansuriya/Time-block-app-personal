<div class="week-calendar-container">
  <div class="cal-week">
    <%= week_calendar events: @timeblocked_events do |date, events| %>
      <div class="cal-date">
        <%= date.strftime('%B %d, %Y') %>
      </div>
      <hr>
      <% events.each_with_index do |timeblock, index| %>
        <div class="timeblock-wrapper">
          <div class="timeblock-container" style="top: <%= (index * 100).to_s + 'px' %>;">
            <div class="timeblock">
              <h3><%= timeblock.start_time.strftime('%I:%M %p') %> - <%= timeblock.end_time.strftime('%I:%M %p') %></h3>
              <% timeblock.events.each do |event| %>
                <div class="event-wrapper <%= "priority-#{event.priority}" %>">
                  <%= link_to edit_event_path(event) do %>
                    <div class="event">
                      <h4><%= event.name %></h4>
                      <p>
                        <strong>Start Time:</strong> <%= event.start_time.strftime('%I:%M %p') %><br>
                        <strong>End Time:</strong> <%= event.end_time.strftime('%I:%M %p') %>
                      </p>
                    </div>
                  <% end %>
                </div>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
<%= link_to 'Add New Event', new_event_path, class: 'btn btn-primary' %>
